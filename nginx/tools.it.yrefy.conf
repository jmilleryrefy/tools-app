# ------------------------------------------------------------
# tools.it.yrefy - Yrefy IT Tools (M365 Script Management)
# ------------------------------------------------------------

# HTTP - Force SSL
server {
    listen 80;
    listen 192.168.192.140:80;
    listen 100.71.177.68:80;
    
    server_name tools.it.yrefy;
    
    include conf.d/include/force-ssl.conf;
}

# HTTPS - Main server block
server {
    listen 443 ssl http2;
    listen 192.168.192.140:443 ssl http2;
    listen 100.71.177.68:443 ssl http2;
    
    server_name tools.it.yrefy;

    # Logging
    access_log /var/log/nginx/tools.it.yrefy/access.log;
    error_log  /var/log/nginx/tools.it.yrefy/error.log warn;

    # SSL configuration
    ssl_certificate     /etc/nginx/ssl/it.yrefy.crt;
    ssl_certificate_key /etc/nginx/ssl/it.yrefy.key;
    include conf.d/include/ssl-params.conf;

    # Security and caching includes
    include conf.d/include/assets.conf;

    # Main application routing
    location / {
        proxy_pass http://127.0.0.1:3007;
        include conf.d/include/proxy.conf;
    }
}
